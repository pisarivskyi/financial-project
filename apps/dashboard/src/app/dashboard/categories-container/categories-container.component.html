<div class="fpd-card">
  <button nz-button (click)="onAddCategory()">Add new category</button>

  <nz-table
    #table
    [nzLoading]="isLoading$ | async"
    [nzData]="(categories$ | async) ?? []"
    [nzFrontPagination]="false"
    [nzPageIndex]="(pagination$ | async)!.pageIndex"
    [nzPageSize]="(pagination$ | async)!.pageSize"
    [nzTotal]="(pagination$ | async)!.total"
    (nzPageIndexChange)="onPageIndexChanged($event)"
  >
    <thead>
    <tr>
      <th>Name</th>
      <th>Parent</th>
      <th>Date</th>
      <th>Updated</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let category of table.data">
      <td>{{ category.name }}</td>
      <td>{{ category.parentCategory?.name }}</td>
      <td>{{ category.createdAt | date }}</td>
      <td>{{ category.updatedAt | date }}</td>
      <td>
        <button nz-button (click)="onEditCategory(category)">edit</button>

        <button
          nz-button
          nz-popconfirm
          nzPopconfirmTitle="Are you sure?"
          nzOkText="ok"
          nzCancelText="cancel"
          (nzOnConfirm)="onDeleteCategory(category)"
        >
          delete
        </button>
      </td>
    </tr>
    </tbody>
  </nz-table>
</div>
