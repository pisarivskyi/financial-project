<nz-spin [nzSpinning]="isLoading$ | async">
  @if (providerAccountsData$ | async; as providerAccountsData) {
    <p>Select accounts you want to save</p>
    <nz-select
      class="select"
      nzMode="multiple"
      [(ngModel)]="selectedAccounts"
      (ngModelChange)="onAccountsChange($event)"
    >
      @for (account of providerAccountsData.accounts; track account.id) {
        <nz-option [nzValue]="account" [nzLabel]="account.maskedPan"></nz-option>
      }
    </nz-select>
  }
</nz-spin>

<div *nzModalFooter>
  <button nz-button nzType="primary" [disabled]="!selectedAccounts.length" (click)="onNext()">Next</button>

  <button nz-button nzType="default" (click)="onClose()">Cancel</button>
</div>
